# 个人待办事项记录簿

## 简介：
- 这是基于todoMVC模板的一个记录待办事项页面，[模板地址]('https://github.com/tastejs/todomvc-app-template')。
- 该模板需要自行通过npm下载初始化页面样式，而且没有各种交互的逻辑代码。
- 该项目的交互代码是采用原生js结合es6的数组方法实现。
- 虽然项目要实现的功能多，但实现起来都比较简单，非常适合练手。

## 启动项目
- npm i
- 然后才能在浏览器里打开

## 实现的功能
- 待办事项的完成、添加、删除、全选和反选所有待办等功能，单击重新编辑待办功能、实时显示剩余未完成待办的功能、三个按钮的事项筛选功能、将所有事项存储到客户端中、一键清除所有已完成事项功能；
- 利用单一数据流的特点对项目进行开发。

## 具体实现逻辑
- 事项的渲染（事项的刷新）
  - 这里需要实现事项的初始化渲染和事项的刷新

    - 在li里自定义一个属性来记录当前渲染的这条数据的id，即data-id=${randerData[i].id}

    - li标签里的completed类名是用于控制待办事项是否完成的样式的，如果添加completed类名，那么该li标签就有待办事项完成的css样式，该类名用数据的done属性进行控制，该属性也用于控制input单选框是否选中

    - 初始化渲染只要对数据遍历，然后将拼接的字符串插入页面，

    - 刷新事项就需要每次置空标签和字符串

- 利用事件冒泡原理给事项的父级ul绑定点击事件，然后根据事件对象里记录DOM不同的class类值来实现待办事项的完成、删除、单击编辑待办功能
  
  - 待办事项的点击完成功能（点击对象为CheckBox单选框）（即事件源对象里记录的DOM的class类为toggle）
    
    - 待办事项的选中和不选中的切换功能：获取事件源DOM对象的li父级上记录的id值，根据这个id值找到data里的数据，将这条数据的done赋值为事件源DOM对象的checked的值，然后重新渲染修改后data。（checked的值用于控制li标签的class类名completed的有无，class类名值为completed就会让li标签具有待办已完成的样式）然后重新渲染data。

  - 待办事项的点击删除功能（点击对象为删除按钮）（即事件源对象里记录的DOM的class类为destroy）

    - 获取事件源DOM对象的li父级上记录的id值，根据这个id值找到data里的数据，利用indexOf获取到这条数据在data里的索引，然后利用数组方法splice剪切掉这条数据，再重新渲染修改后data。

  - 待办事项的点击重新编辑功能（点击对象为label标签）（即事件源对象里记录的DOM的标签名为LABEL）

    - 给当前点击到的label标签的父级li标签加上editing的class类名（以拼接字符串的方式）。

    - 当修改完成后就需要将这个修改后的值赋值到data数组的todo里:首先需要给class类名为todo-list绑定一个回车事件,再获取到事件源对象上的DOM对象，然后去找父级的li利用getAttridute()来获取到保存的id值，再在data数组里找到这条数据，并将它的todo值，当前这个input框的value值，然后重新渲染data。

- 待办事项的全选和反选功能
  - 给toggle-all的label标签绑定change事件，该事件是用于监听input框聚焦和失焦的变化。

  - 只需要将与label绑定的input标签的checked值赋值到data里的每条数据的done的值中，然后重新渲染data，就可以根据一个按钮实现一键全选和反选的功能，

  - 因为每完成一个待完成都有可能触发全选功能或全不选功能，所以就需要在每次完成一项待办任务时都要对data里的每条数据的done值进行检测，如果所有的事项全部完成就要让input上的checked为true，否则就为false。

- 添加待办功能

  - 给class类名为new-todo的input标签绑定回车事件,然后在data的最后一位添加一个新数据，todo值为输入的input的value值，然后重新渲染data，创建完毕后需要清空input的value值。



- 三个按钮的筛选功能

  - 3个按钮的样式改变
    - 在这个下载的模板里这几个按钮的功能都是a标签以hash跳转的方式来写的，所以给window绑定监听页面以hash跳转就触发的hashchange事件。
    - 遍历这3个a标签的hash值是否与当前显示页面的hash值相同,相同就要给这个a标签加上一个值为selected的class类名，该类名是用于控制选中状态样式

  - 筛选功能的实现

    - 该功能不需要再去写方法去实现，只需要在事项渲染阶段时就对事项进行根据当前打开页面的hash值来判断需要展示什么类型的数据，然后用数组的filter方法对数组进行筛选。


- 一键清除完成事项功能

  - 只需要将data里done状态为false的都筛选出来，然后把这些重新筛选出来的数据进行渲染。

- 将数据存储到客户端功能
  - 以localStorage.setItem('todoList', JSON.stringify(data))的形式将数据存储到localstorage中，并且在每次重新渲染data时都要存储一次


- 给修改待办的input框绑定一个失焦事件
  - 该事件绑定在class类名为todo-list的标签上，所以不能绑定blur事件，但可用focuout代替。当失焦时将当前li上editing的类名删掉。